<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä»Šå®¿åº— ID-POS Analytics Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700;900&family=Bebas+Neue&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --trial-navy: #002B61;
      --trial-light: #E8F0F8;
      --accent-green: #10B981;
      --accent-orange: #F59E0B;
      --accent-red: #EF4444;
      --text-primary: #1a1a1a;
      --text-secondary: #666;
      --bg-white: #ffffff;
      --bg-gray: #f8f9fa;
      --border: #e5e7eb;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Noto Sans JP', sans-serif;
      background: var(--bg-white);
      color: var(--text-primary);
      line-height: 1.6;
    }

    /* Header */
    .header {
      background: var(--trial-navy);
      color: white;
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header h1 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 36px;
      letter-spacing: 0.1em;
    }

    .header-info {
      text-align: right;
      font-size: 14px;
      opacity: 0.9;
    }

    /* Main Layout */
    .main-container {
      display: grid;
      grid-template-columns: 280px 1fr;
      min-height: calc(100vh - 80px);
    }

    /* Sidebar */
    .sidebar {
      background: var(--bg-gray);
      border-right: 1px solid var(--border);
      padding: 24px;
    }

    .slicer-section {
      margin-bottom: 28px;
    }

    .slicer-title {
      font-size: 12px;
      font-weight: 700;
      color: var(--trial-navy);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--trial-navy);
    }

    .slicer-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .slicer-btn {
      padding: 8px 14px;
      border: 1px solid var(--border);
      background: white;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      border-radius: 4px;
    }

    .slicer-btn:hover {
      border-color: var(--trial-navy);
    }

    .slicer-btn.active {
      background: var(--trial-navy);
      color: white;
      border-color: var(--trial-navy);
    }

    /* Content Area */
    .content {
      padding: 32px 40px;
      overflow-y: auto;
    }

    .section {
      margin-bottom: 48px;
    }

    .section-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 24px;
    }

    .section-number {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 48px;
      color: var(--trial-navy);
      opacity: 0.3;
      line-height: 1;
    }

    .section-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--trial-navy);
    }

    .section-subtitle {
      font-size: 13px;
      color: var(--text-secondary);
      margin-top: 4px;
    }

    /* KPI Cards */
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 32px;
    }

    .kpi-card {
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 20px;
      position: relative;
      overflow: hidden;
    }

    .kpi-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--trial-navy);
    }

    .kpi-label {
      font-size: 12px;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 8px;
    }

    .kpi-value {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 36px;
      color: var(--trial-navy);
      line-height: 1;
    }

    .kpi-change {
      font-size: 13px;
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .kpi-change.positive { color: var(--accent-green); }
    .kpi-change.negative { color: var(--accent-red); }

    /* Calendar Heatmap */
    .calendar-container {
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 24px;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
    }

    .calendar-header {
      font-size: 12px;
      font-weight: 600;
      text-align: center;
      padding: 8px;
      color: var(--text-secondary);
    }

    .calendar-day {
      aspect-ratio: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 500;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .calendar-day:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .calendar-day.weekend {
      background: rgba(0, 43, 97, 0.08);
    }

    .calendar-day .day-number {
      font-weight: 700;
      margin-bottom: 2px;
    }

    .calendar-day .day-sales {
      font-size: 10px;
      opacity: 0.8;
    }

    /* Charts Grid */
    .charts-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    .chart-card {
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 24px;
    }

    .chart-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 16px;
      color: var(--trial-navy);
    }

    .chart-container {
      height: 280px;
      position: relative;
    }

    /* Simulation */
    .simulation-container {
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
    }

    .simulation-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 24px;
      border-bottom: 1px solid var(--border);
      background: var(--bg-gray);
    }

    .simulation-controls {
      display: flex;
      gap: 12px;
    }

    .sim-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .sim-btn.primary {
      background: var(--trial-navy);
      color: white;
    }

    .sim-btn.primary:hover {
      background: #003d85;
    }

    .sim-btn.secondary {
      background: white;
      border: 1px solid var(--border);
    }

    .simulation-canvas {
      width: 100%;
      height: 500px;
      display: block;
    }

    .simulation-stats {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 1px;
      background: var(--border);
      border-top: 1px solid var(--border);
    }

    .sim-stat {
      background: white;
      padding: 16px;
      text-align: center;
    }

    .sim-stat-label {
      font-size: 11px;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .sim-stat-value {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 28px;
      color: var(--trial-navy);
      margin-top: 4px;
    }

    /* N1 Analysis */
    .n1-container {
      display: grid;
      grid-template-columns: 300px 1fr 300px;
      gap: 24px;
    }

    .customer-card {
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 24px;
    }

    .customer-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: var(--trial-light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      margin: 0 auto 16px;
    }

    .customer-name {
      font-size: 18px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 4px;
    }

    .customer-segment {
      font-size: 13px;
      color: var(--text-secondary);
      text-align: center;
      margin-bottom: 20px;
    }

    .rfm-scores {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      margin-bottom: 20px;
    }

    .rfm-item {
      text-align: center;
      padding: 12px;
      background: var(--bg-gray);
      border-radius: 6px;
    }

    .rfm-label {
      font-size: 10px;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .rfm-value {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 24px;
      color: var(--trial-navy);
    }

    .persona-tag {
      display: inline-block;
      padding: 6px 12px;
      background: var(--trial-navy);
      color: white;
      font-size: 12px;
      font-weight: 600;
      border-radius: 20px;
      margin: 4px;
    }

    .radar-container {
      height: 300px;
    }

    .purchase-history {
      max-height: 400px;
      overflow-y: auto;
    }

    .purchase-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .purchase-item:last-child {
      border-bottom: none;
    }

    .purchase-product {
      font-size: 14px;
      font-weight: 500;
    }

    .purchase-category {
      font-size: 12px;
      color: var(--text-secondary);
    }

    .purchase-amount {
      font-weight: 600;
      color: var(--trial-navy);
    }

    /* Basket Analysis */
    .basket-rules {
      display: grid;
      gap: 12px;
    }

    .basket-rule {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px;
      background: var(--bg-gray);
      border-radius: 8px;
    }

    .basket-items {
      display: flex;
      align-items: center;
      gap: 8px;
      flex: 1;
    }

    .basket-item {
      padding: 8px 14px;
      background: white;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 500;
    }

    .basket-arrow {
      color: var(--trial-navy);
      font-size: 20px;
    }

    .basket-metrics {
      display: flex;
      gap: 20px;
    }

    .basket-metric {
      text-align: center;
    }

    .basket-metric-label {
      font-size: 10px;
      color: var(--text-secondary);
      text-transform: uppercase;
    }

    .basket-metric-value {
      font-weight: 700;
      color: var(--trial-navy);
    }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: var(--bg-gray); }
    ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #aaa; }
  </style>
</head>
<body>

<header class="header">
  <div>
    <h1>IMAJUKU STORE ANALYTICS</h1>
    <div style="font-size: 13px; opacity: 0.8; margin-top: 4px;">ä»Šå®¿åº— ID-POS é¡§å®¢åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</div>
  </div>
  <div class="header-info">
    <div style="font-weight: 600;">2025å¹´10æœˆåº¦</div>
    <div>æœ€çµ‚æ›´æ–°: 2025/10/31 23:59</div>
  </div>
</header>

<div class="main-container">
  <!-- Sidebar Slicers -->
  <aside class="sidebar">
    <div class="slicer-section">
      <div class="slicer-title">æ€§åˆ¥</div>
      <div class="slicer-buttons" id="genderSlicers">
        <button class="slicer-btn active" data-value="all">å…¨ã¦</button>
        <button class="slicer-btn" data-value="male">ç”·</button>
        <button class="slicer-btn" data-value="female">å¥³</button>
      </div>
    </div>

    <div class="slicer-section">
      <div class="slicer-title">å¹´ä»£</div>
      <div class="slicer-buttons" id="ageSlicers">
        <button class="slicer-btn active" data-value="all">å…¨ã¦</button>
        <button class="slicer-btn" data-value="10">10ä»£</button>
        <button class="slicer-btn" data-value="20">20ä»£</button>
        <button class="slicer-btn" data-value="30">30ä»£</button>
        <button class="slicer-btn" data-value="40">40ä»£</button>
        <button class="slicer-btn" data-value="50">50ä»£</button>
        <button class="slicer-btn" data-value="60">60ä»£</button>
        <button class="slicer-btn" data-value="70">70ä»£</button>
        <button class="slicer-btn" data-value="80">80ä»£+</button>
      </div>
    </div>

    <div class="slicer-section">
      <div class="slicer-title">ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸</div>
      <div class="slicer-buttons" id="lifestyleSlicers">
        <button class="slicer-btn active" data-value="all">å…¨ã¦</button>
        <button class="slicer-btn" data-value="single">å˜èº«</button>
        <button class="slicer-btn" data-value="dinks">DINKS</button>
        <button class="slicer-btn" data-value="dewks">DEWKS</button>
        <button class="slicer-btn" data-value="senior">è€å¹´å¤«å©¦</button>
      </div>
    </div>

    <div class="slicer-section">
      <div class="slicer-title">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çŠ¶æ³</div>
      <div id="filterStatus" style="font-size: 13px; color: var(--text-secondary); padding: 12px; background: white; border-radius: 6px; border: 1px solid var(--border);">
        å…¨ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºä¸­
      </div>
    </div>

    <div class="slicer-section" style="margin-top: auto;">
      <button class="sim-btn primary" style="width: 100%;" onclick="resetAllFilters()">
        ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="content">
    <!-- Section 1: KPIs -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">01</span>
        <div>
          <h2 class="section-title">æœˆæ¬¡ã‚µãƒãƒªãƒ¼</h2>
          <p class="section-subtitle">2025å¹´10æœˆ ä»Šå®¿åº— å®Ÿç¸¾</p>
        </div>
      </div>

      <div class="kpi-grid">
        <div class="kpi-card">
          <div class="kpi-label">å£²ä¸Šé«˜</div>
          <div class="kpi-value" id="kpiSales">Â¥12.8M</div>
          <div class="kpi-change positive">â†‘ 8.5% vs å‰æœˆ</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">æ¥åº—å®¢æ•°</div>
          <div class="kpi-value" id="kpiVisitors">28,450</div>
          <div class="kpi-change positive">â†‘ 5.2% vs å‰æœˆ</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">å®¢å˜ä¾¡</div>
          <div class="kpi-value" id="kpiAvgTicket">Â¥2,245</div>
          <div class="kpi-change positive">â†‘ 3.1% vs å‰æœˆ</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">è³¼è²·ç‚¹æ•°/äºº</div>
          <div class="kpi-value" id="kpiItemsPerCustomer">4.8</div>
          <div class="kpi-change negative">â†“ 0.5% vs å‰æœˆ</div>
        </div>
      </div>
    </section>

    <!-- Section 2: Calendar Heatmap -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">02</span>
        <div>
          <h2 class="section-title">æ—¥åˆ¥å£²ä¸Šãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—</h2>
          <p class="section-subtitle">æ›œæ—¥åˆ¥ã®å£²ä¸Šå‚¾å‘ã‚’å¯è¦–åŒ–ï¼ˆåœŸæ—¥ç¥ã¯èƒŒæ™¯ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼‰</p>
        </div>
      </div>

      <div class="calendar-container">
        <div class="calendar-grid" id="calendarGrid"></div>
      </div>
    </section>

    <!-- Section 3: Category Analysis -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">03</span>
        <div>
          <h2 class="section-title">ã‚«ãƒ†ã‚´ãƒªåˆ†æ</h2>
          <p class="section-subtitle">å…¨ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®å£²ä¸Šæ§‹æˆã¨é¡§å®¢å±æ€§</p>
        </div>
      </div>

      <div class="charts-grid">
        <div class="chart-card">
          <div class="chart-title">ã‚«ãƒ†ã‚´ãƒªåˆ¥å£²ä¸Šæ§‹æˆæ¯”</div>
          <div class="chart-container">
            <canvas id="categoryPieChart"></canvas>
          </div>
        </div>
        <div class="chart-card">
          <div class="chart-title">ã‚«ãƒ†ã‚´ãƒªåˆ¥å£²ä¸Šæ¨ç§»</div>
          <div class="chart-container">
            <canvas id="categoryBarChart"></canvas>
          </div>
        </div>
        <div class="chart-card">
          <div class="chart-title">å¹´ä»£åˆ¥ã‚«ãƒ†ã‚´ãƒªè³¼è²·å‚¾å‘</div>
          <div class="chart-container">
            <canvas id="ageRadarChart"></canvas>
          </div>
        </div>
        <div class="chart-card">
          <div class="chart-title">ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¥æ”¯å‡º</div>
          <div class="chart-container">
            <canvas id="lifestyleChart"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 4: Store Simulation -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">04</span>
        <div>
          <h2 class="section-title">åº—èˆ—å›éŠã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
          <p class="section-subtitle">ä»Šå®¿åº—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§ã®é¡§å®¢å‹•ç·šã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¯è¦–åŒ–</p>
        </div>
      </div>

      <div class="simulation-container">
        <div class="simulation-header">
          <div style="font-weight: 600; color: var(--trial-navy);">ä»Šå®¿åº— ãƒ•ãƒ­ã‚¢ãƒãƒƒãƒ—</div>
          <div class="simulation-controls">
            <button class="sim-btn primary" id="playBtn" onclick="toggleSimulation()">
              <span id="playIcon">â–¶</span> å†ç”Ÿ
            </button>
            <button class="sim-btn secondary" onclick="resetSimulation()">
              â†» ãƒªã‚»ãƒƒãƒˆ
            </button>
            <select id="speedSelect" onchange="changeSpeed()" style="padding: 10px 16px; border: 1px solid var(--border); border-radius: 6px; font-size: 14px;">
              <option value="0.5">0.5x é€Ÿåº¦</option>
              <option value="1" selected>1x é€Ÿåº¦</option>
              <option value="2">2x é€Ÿåº¦</option>
              <option value="3">3x é€Ÿåº¦</option>
            </select>
          </div>
        </div>
        <canvas id="simulationCanvas" class="simulation-canvas"></canvas>
        <div class="simulation-stats">
          <div class="sim-stat">
            <div class="sim-stat-label">ç¾åœ¨ã®å®¢æ•°</div>
            <div class="sim-stat-value" id="statCurrentCustomers">0</div>
          </div>
          <div class="sim-stat">
            <div class="sim-stat-label">ç´¯è¨ˆæ¥åº—</div>
            <div class="sim-stat-value" id="statTotalVisitors">0</div>
          </div>
          <div class="sim-stat">
            <div class="sim-stat-label">è³¼è²·å®Œäº†</div>
            <div class="sim-stat-value" id="statPurchases">0</div>
          </div>
          <div class="sim-stat">
            <div class="sim-stat-label">å¹³å‡æ»åœ¨æ™‚é–“</div>
            <div class="sim-stat-value" id="statAvgTime">0s</div>
          </div>
          <div class="sim-stat">
            <div class="sim-stat-label">çµŒéæ™‚é–“</div>
            <div class="sim-stat-value" id="statElapsed">0:00</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 5: N1 Analysis -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">05</span>
        <div>
          <h2 class="section-title">N1 é¡§å®¢åˆ†æ</h2>
          <p class="section-subtitle">RFMã‚¹ã‚³ã‚¢ã¨é¡§å®¢DNAã«ã‚ˆã‚‹ãƒšãƒ«ã‚½ãƒŠåˆ†æ</p>
        </div>
      </div>

      <div class="n1-container">
        <!-- Customer Profile -->
        <div class="customer-card">
          <div class="customer-avatar">ğŸ‘©</div>
          <div class="customer-name" id="n1Name">ç”°ä¸­ èŠ±å­</div>
          <div class="customer-segment" id="n1Segment">40ä»£ãƒ»DEWKSãƒ»é€±2æ¥åº—</div>

          <div class="rfm-scores">
            <div class="rfm-item">
              <div class="rfm-label">Recency</div>
              <div class="rfm-value" id="rfmR">5</div>
            </div>
            <div class="rfm-item">
              <div class="rfm-label">Frequency</div>
              <div class="rfm-value" id="rfmF">4</div>
            </div>
            <div class="rfm-item">
              <div class="rfm-label">Monetary</div>
              <div class="rfm-value" id="rfmM">5</div>
            </div>
          </div>

          <div style="text-align: center; margin-bottom: 16px;">
            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">ãƒšãƒ«ã‚½ãƒŠã‚¿ã‚°</div>
            <div id="personaTags">
              <span class="persona-tag">é‡èœå¥½ã</span>
              <span class="persona-tag">å¥åº·å¿—å‘</span>
              <span class="persona-tag">æ™‚çŸ­æ´¾</span>
            </div>
          </div>

          <div style="font-size: 13px; color: var(--text-secondary); text-align: center;">
            é¡§å®¢ID: <span id="n1CustomerId">bf0a9...d81df8</span>
          </div>
        </div>

        <!-- Radar Chart -->
        <div class="chart-card">
          <div class="chart-title">é¡§å®¢DNA ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ</div>
          <div class="radar-container">
            <canvas id="customerRadar"></canvas>
          </div>
          <div style="text-align: center; margin-top: 16px; font-size: 14px; color: var(--text-secondary);" id="personaDescription">
            ã“ã®é¡§å®¢ã¯<strong style="color: var(--trial-navy);">é’æœãƒ»æƒ£èœä¸­å¿ƒ</strong>ã®è³¼è²·ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã€
            å¥åº·å¿—å‘ã‹ã¤æ™‚çŸ­ãƒ‹ãƒ¼ã‚ºãŒé«˜ã„ã¨æ¨å®šã•ã‚Œã¾ã™ã€‚
          </div>
        </div>

        <!-- Purchase History -->
        <div class="customer-card">
          <div class="chart-title" style="margin-bottom: 16px;">ç›´è¿‘ã®è³¼è²·å±¥æ­´</div>
          <div class="purchase-history" id="purchaseHistory">
            <!-- Generated by JS -->
          </div>
        </div>
      </div>
    </section>

    <!-- Section 6: Basket Analysis -->
    <section class="section">
      <div class="section-header">
        <span class="section-number">06</span>
        <div>
          <h2 class="section-title">ä½µå£²åˆ†æ</h2>
          <p class="section-subtitle">ã‚¢ã‚½ã‚·ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ã«ã‚ˆã‚‹å•†å“é–¢é€£æ€§</p>
        </div>
      </div>

      <div class="chart-card">
        <div class="basket-rules" id="basketRules">
          <!-- Generated by JS -->
        </div>
      </div>
    </section>
  </main>
</div>

<script>
// ==================== EMBEDDED DATA ====================
const DAILY_SALES = {
  1: 425000, 2: 398000, 3: 412000, 4: 520000, 5: 580000, // Wed 1st
  6: 320000, 7: 335000, 8: 410000, 9: 445000, 10: 485000, 11: 620000, 12: 710000, // Week 2
  13: 380000, 14: 365000, 15: 425000, 16: 458000, 17: 502000, 18: 680000, 19: 750000, // Week 3
  20: 345000, 21: 378000, 22: 412000, 23: 468000, 24: 520000, 25: 720000, 26: 780000, // Week 4
  27: 365000, 28: 395000, 29: 445000, 30: 485000, 31: 540000 // Week 5
};

const CATEGORY_DATA = {
  'é’æœ': { sales: 2850000, color: '#22c55e', share: 22.3 },
  'ç²¾è‚‰': { sales: 2180000, color: '#ef4444', share: 17.0 },
  'é®®é­š': { sales: 1520000, color: '#3b82f6', share: 11.9 },
  'æƒ£èœ': { sales: 1680000, color: '#f59e0b', share: 13.1 },
  'æ—¥é…': { sales: 1420000, color: '#8b5cf6', share: 11.1 },
  'åŠ å·¥é£Ÿå“': { sales: 1250000, color: '#06b6d4', share: 9.8 },
  'é£²æ–™': { sales: 1050000, color: '#ec4899', share: 8.2 },
  'è£½è“': { sales: 850000, color: '#84cc16', share: 6.6 }
};

const AGE_CATEGORY_DATA = {
  '10ä»£': [15, 8, 5, 12, 10, 18, 22, 25],
  '20ä»£': [18, 12, 8, 20, 15, 20, 18, 15],
  '30ä»£': [22, 18, 12, 18, 18, 15, 12, 10],
  '40ä»£': [25, 22, 15, 20, 20, 12, 10, 8],
  '50ä»£': [28, 25, 18, 15, 18, 10, 8, 6],
  '60ä»£': [30, 28, 22, 12, 15, 8, 6, 5],
  '70ä»£': [32, 30, 25, 10, 12, 6, 5, 4],
  '80ä»£+': [35, 32, 28, 8, 10, 5, 4, 3]
};

const LIFESTYLE_DATA = {
  'å˜èº«': { avg: 1850, frequency: 2.8 },
  'DINKS': { avg: 2450, frequency: 3.2 },
  'DEWKS': { avg: 3200, frequency: 4.5 },
  'è€å¹´å¤«å©¦': { avg: 2100, frequency: 3.8 }
};

const CUSTOMERS_DATA = [
  { id: 'bf0a9416...d81df8', name: 'ç”°ä¸­ èŠ±å­', gender: 'female', age: '40ä»£', lifestyle: 'DEWKS', rfm: [5, 4, 5], categories: [35, 15, 12, 25, 18, 8, 5, 8], persona: ['é‡èœå¥½ã', 'å¥åº·å¿—å‘', 'æ™‚çŸ­æ´¾'] },
  { id: '72b5e85a...a738f5', name: 'å±±ç”° å¤ªéƒ', gender: 'male', age: '50ä»£', lifestyle: 'DINKS', rfm: [4, 5, 4], categories: [20, 30, 25, 10, 15, 12, 10, 5], persona: ['è‚‰å¥½ã', 'é­šå¥½ã', 'ã‚°ãƒ«ãƒ¡å¿—å‘'] },
  { id: 'e7afddba...b05edee', name: 'ä½è—¤ ç¾å’²', gender: 'female', age: '20ä»£', lifestyle: 'å˜èº«', rfm: [3, 3, 3], categories: [15, 12, 8, 18, 12, 15, 20, 22], persona: ['ãŠè“å­å¥½ã', 'é£²æ–™å¤šã‚', 'ã‚³ãƒ³ãƒ“ãƒ‹æ´¾'] },
  { id: '9f41fd0c...eddaf5ea9', name: 'éˆ´æœ¨ ä¸€éƒ', gender: 'male', age: '70ä»£', lifestyle: 'è€å¹´å¤«å©¦', rfm: [5, 5, 4], categories: [32, 25, 28, 12, 20, 10, 5, 3], persona: ['é’æœä¸­å¿ƒ', 'é­šå¥½ã', 'å¥åº·å¿—å‘'] }
];

const BASKET_RULES = [
  { itemA: 'ã‚­ãƒ£ãƒ™ãƒ„', itemB: 'è±šè‚‰ãƒ­ãƒ¼ã‚¹', support: 12.5, confidence: 68.2, lift: 3.21 },
  { itemA: 'ç‰›ä¹³', itemB: 'é£Ÿãƒ‘ãƒ³', support: 15.8, confidence: 72.5, lift: 2.85 },
  { itemA: 'åˆºèº«ç››åˆã›', itemB: 'æ—¥æœ¬é…’', support: 8.2, confidence: 58.5, lift: 4.12 },
  { itemA: 'ã‚µãƒ©ãƒ€', itemB: 'ãƒ‰ãƒ¬ãƒƒã‚·ãƒ³ã‚°', support: 18.5, confidence: 82.5, lift: 3.52 },
  { itemA: 'ã‚«ãƒ¬ãƒ¼ãƒ«ãƒ¼', itemB: 'ç‰ã­ã', support: 10.2, confidence: 75.8, lift: 3.85 },
  { itemA: 'ãƒ“ãƒ¼ãƒ«', itemB: 'æè±†', support: 9.5, confidence: 65.2, lift: 4.28 }
];

const PURCHASE_HISTORY = [
  { date: '10/31', product: 'ã‚­ãƒ£ãƒ™ãƒ„ 1/2ã‚«ãƒƒãƒˆ', category: 'é’æœ', amount: 108 },
  { date: '10/31', product: 'è±šãƒ­ãƒ¼ã‚¹ 100g', category: 'ç²¾è‚‰', amount: 298 },
  { date: '10/31', product: 'é¶ã‚‚ã‚‚è‚‰', category: 'ç²¾è‚‰', amount: 458 },
  { date: '10/29', product: 'ã‚«ãƒƒãƒˆé‡èœã‚µãƒ©ãƒ€', category: 'æƒ£èœ', amount: 198 },
  { date: '10/29', product: 'ç‰›ä¹³ 1L', category: 'æ—¥é…', amount: 218 },
  { date: '10/27', product: 'åˆºèº«ç››åˆã›', category: 'é®®é­š', amount: 980 },
  { date: '10/27', product: 'é’ã­ã', category: 'é’æœ', amount: 128 },
  { date: '10/25', product: 'ãŠå¼å½“ï¼ˆå¹•ã®å†…ï¼‰', category: 'æƒ£èœ', amount: 498 }
];

// ==================== STORE LAYOUT ====================
const STORE_ZONES = [
  { id: 'entrance', name: 'å…¥å£', x: 400, y: 440, w: 120, h: 50, color: '#002B61' },
  { id: 'produce', name: 'é’æœ', x: 60, y: 60, w: 160, h: 120, color: '#22c55e' },
  { id: 'meat', name: 'ç²¾è‚‰', x: 240, y: 60, w: 140, h: 120, color: '#ef4444' },
  { id: 'fish', name: 'é®®é­š', x: 400, y: 60, w: 140, h: 120, color: '#3b82f6' },
  { id: 'deli', name: 'æƒ£èœ', x: 560, y: 60, w: 140, h: 120, color: '#f59e0b' },
  { id: 'dairy', name: 'æ—¥é…', x: 720, y: 60, w: 140, h: 180, color: '#8b5cf6' },
  { id: 'frozen', name: 'å†·å‡é£Ÿå“', x: 720, y: 260, w: 140, h: 120, color: '#06b6d4' },
  { id: 'beverage', name: 'é£²æ–™', x: 560, y: 200, w: 140, h: 100, color: '#ec4899' },
  { id: 'snacks', name: 'è£½è“', x: 60, y: 200, w: 140, h: 100, color: '#84cc16' },
  { id: 'grocery', name: 'åŠ å·¥é£Ÿå“', x: 220, y: 200, w: 160, h: 100, color: '#14b8a6' },
  { id: 'register', name: 'ãƒ¬ã‚¸', x: 180, y: 380, w: 200, h: 60, color: '#002B61' }
];

const FLOW_PATHS = [
  ['entrance', 'produce', 'meat', 'fish', 'deli', 'register'], // æ¨™æº–ãƒ«ãƒ¼ãƒˆ
  ['entrance', 'produce', 'meat', 'dairy', 'register'], // ç°¡æ˜“ãƒ«ãƒ¼ãƒˆ
  ['entrance', 'snacks', 'beverage', 'register'], // ãŠè“å­æ´¾
  ['entrance', 'deli', 'beverage', 'register'], // æƒ£èœæ´¾
  ['entrance', 'produce', 'meat', 'fish', 'deli', 'dairy', 'frozen', 'register'], // ã¾ã¨ã‚è²·ã„
  ['entrance', 'grocery', 'beverage', 'dairy', 'register'] // åŠ å·¥é£Ÿå“æ´¾
];

// ==================== GLOBAL STATE ====================
let currentFilters = { gender: 'all', age: 'all', lifestyle: 'all' };
let simulationRunning = false;
let simulationSpeed = 1;
let customers = [];
let totalVisitors = 0;
let totalPurchases = 0;
let elapsedTime = 0;
let animationId = null;
let lastTime = 0;
let charts = {};

// ==================== INITIALIZATION ====================
document.addEventListener('DOMContentLoaded', () => {
  initSlicers();
  renderCalendar();
  initCharts();
  renderBasketRules();
  renderPurchaseHistory();
  initSimulation();
  startSimulation(); // Auto-start
});

// ==================== SLICER FUNCTIONS ====================
function initSlicers() {
  ['genderSlicers', 'ageSlicers', 'lifestyleSlicers'].forEach(containerId => {
    const container = document.getElementById(containerId);
    container.querySelectorAll('.slicer-btn').forEach(btn => {
      btn.addEventListener('click', () => handleSlicerClick(containerId, btn));
    });
  });
}

function handleSlicerClick(containerId, btn) {
  const container = document.getElementById(containerId);
  container.querySelectorAll('.slicer-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');

  const filterType = containerId.replace('Slicers', '');
  currentFilters[filterType] = btn.dataset.value;

  updateFilterStatus();
  updateAllCharts();
}

function updateFilterStatus() {
  const status = document.getElementById('filterStatus');
  const filters = [];

  if (currentFilters.gender !== 'all') {
    filters.push(currentFilters.gender === 'male' ? 'ç”·æ€§' : 'å¥³æ€§');
  }
  if (currentFilters.age !== 'all') {
    filters.push(currentFilters.age + 'ä»£');
  }
  if (currentFilters.lifestyle !== 'all') {
    const labels = { single: 'å˜èº«', dinks: 'DINKS', dewks: 'DEWKS', senior: 'è€å¹´å¤«å©¦' };
    filters.push(labels[currentFilters.lifestyle]);
  }

  status.textContent = filters.length > 0 ? filters.join(' / ') : 'å…¨ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºä¸­';
}

function resetAllFilters() {
  currentFilters = { gender: 'all', age: 'all', lifestyle: 'all' };

  ['genderSlicers', 'ageSlicers', 'lifestyleSlicers'].forEach(containerId => {
    const container = document.getElementById(containerId);
    container.querySelectorAll('.slicer-btn').forEach((btn, i) => {
      btn.classList.toggle('active', i === 0);
    });
  });

  updateFilterStatus();
  updateAllCharts();
}

// ==================== CALENDAR HEATMAP ====================
function renderCalendar() {
  const grid = document.getElementById('calendarGrid');
  const days = ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'];

  // Header
  days.forEach(d => {
    const header = document.createElement('div');
    header.className = 'calendar-header';
    header.textContent = d;
    grid.appendChild(header);
  });

  // October 2025 starts on Wednesday (index 2), need 2 empty cells
  for (let i = 0; i < 2; i++) {
    const empty = document.createElement('div');
    grid.appendChild(empty);
  }

  // Days
  const maxSales = Math.max(...Object.values(DAILY_SALES));
  const minSales = Math.min(...Object.values(DAILY_SALES));

  for (let day = 1; day <= 31; day++) {
    const dayEl = document.createElement('div');
    dayEl.className = 'calendar-day';

    // Calculate day of week (Wed=0 for Oct 1)
    const dayOfWeek = (day + 1) % 7; // 0=Mon, 6=Sun
    if (dayOfWeek >= 5) { // Sat or Sun
      dayEl.classList.add('weekend');
    }

    const sales = DAILY_SALES[day];
    const intensity = (sales - minSales) / (maxSales - minSales);
    const bgColor = `rgba(0, 43, 97, ${0.1 + intensity * 0.7})`;
    dayEl.style.backgroundColor = bgColor;
    dayEl.style.color = intensity > 0.5 ? 'white' : 'var(--text-primary)';

    dayEl.innerHTML = `
      <span class="day-number">${day}</span>
      <span class="day-sales">Â¥${(sales / 10000).toFixed(1)}ä¸‡</span>
    `;

    grid.appendChild(dayEl);
  }
}

// ==================== CHARTS ====================
function initCharts() {
  // Category Pie Chart
  const pieCtx = document.getElementById('categoryPieChart').getContext('2d');
  charts.pie = new Chart(pieCtx, {
    type: 'doughnut',
    data: {
      labels: Object.keys(CATEGORY_DATA),
      datasets: [{
        data: Object.values(CATEGORY_DATA).map(c => c.share),
        backgroundColor: Object.values(CATEGORY_DATA).map(c => c.color),
        borderWidth: 2,
        borderColor: '#fff'
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          position: 'right',
          labels: { font: { family: 'Noto Sans JP', size: 12 } }
        }
      }
    }
  });

  // Category Bar Chart
  const barCtx = document.getElementById('categoryBarChart').getContext('2d');
  charts.bar = new Chart(barCtx, {
    type: 'bar',
    data: {
      labels: Object.keys(CATEGORY_DATA),
      datasets: [{
        label: 'å£²ä¸Š (ä¸‡å††)',
        data: Object.values(CATEGORY_DATA).map(c => c.sales / 10000),
        backgroundColor: Object.values(CATEGORY_DATA).map(c => c.color)
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display: false } },
      scales: {
        y: { beginAtZero: true }
      }
    }
  });

  // Age Radar Chart
  const radarCtx = document.getElementById('ageRadarChart').getContext('2d');
  charts.ageRadar = new Chart(radarCtx, {
    type: 'radar',
    data: {
      labels: Object.keys(CATEGORY_DATA),
      datasets: [
        {
          label: '20ä»£',
          data: AGE_CATEGORY_DATA['20ä»£'],
          borderColor: '#3b82f6',
          backgroundColor: 'rgba(59, 130, 246, 0.1)'
        },
        {
          label: '50ä»£',
          data: AGE_CATEGORY_DATA['50ä»£'],
          borderColor: '#ef4444',
          backgroundColor: 'rgba(239, 68, 68, 0.1)'
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        r: { beginAtZero: true, max: 40 }
      }
    }
  });

  // Lifestyle Chart
  const lifestyleCtx = document.getElementById('lifestyleChart').getContext('2d');
  charts.lifestyle = new Chart(lifestyleCtx, {
    type: 'bar',
    data: {
      labels: Object.keys(LIFESTYLE_DATA),
      datasets: [{
        label: 'å¹³å‡å®¢å˜ä¾¡ (å††)',
        data: Object.values(LIFESTYLE_DATA).map(l => l.avg),
        backgroundColor: ['#f59e0b', '#3b82f6', '#22c55e', '#8b5cf6']
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      indexAxis: 'y',
      plugins: { legend: { display: false } }
    }
  });

  // Customer Radar
  const customerRadarCtx = document.getElementById('customerRadar').getContext('2d');
  const currentCustomer = CUSTOMERS_DATA[0];
  charts.customerRadar = new Chart(customerRadarCtx, {
    type: 'radar',
    data: {
      labels: Object.keys(CATEGORY_DATA),
      datasets: [{
        label: currentCustomer.name,
        data: currentCustomer.categories,
        borderColor: '#002B61',
        backgroundColor: 'rgba(0, 43, 97, 0.2)',
        borderWidth: 2
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        r: { beginAtZero: true, max: 40 }
      },
      plugins: {
        legend: { display: false }
      }
    }
  });
}

function updateAllCharts() {
  // Update charts based on filters
  // This would filter data in a real implementation
  console.log('Updating charts with filters:', currentFilters);
}

// ==================== BASKET ANALYSIS ====================
function renderBasketRules() {
  const container = document.getElementById('basketRules');
  container.innerHTML = BASKET_RULES.map(rule => `
    <div class="basket-rule">
      <div class="basket-items">
        <span class="basket-item">${rule.itemA}</span>
        <span class="basket-arrow">â†’</span>
        <span class="basket-item">${rule.itemB}</span>
      </div>
      <div class="basket-metrics">
        <div class="basket-metric">
          <div class="basket-metric-label">Support</div>
          <div class="basket-metric-value">${rule.support}%</div>
        </div>
        <div class="basket-metric">
          <div class="basket-metric-label">Confidence</div>
          <div class="basket-metric-value">${rule.confidence}%</div>
        </div>
        <div class="basket-metric">
          <div class="basket-metric-label">Lift</div>
          <div class="basket-metric-value">${rule.lift.toFixed(2)}x</div>
        </div>
      </div>
    </div>
  `).join('');
}

function renderPurchaseHistory() {
  const container = document.getElementById('purchaseHistory');
  container.innerHTML = PURCHASE_HISTORY.map(p => `
    <div class="purchase-item">
      <div>
        <div class="purchase-product">${p.product}</div>
        <div class="purchase-category">${p.date} | ${p.category}</div>
      </div>
      <div class="purchase-amount">Â¥${p.amount}</div>
    </div>
  `).join('');
}

// ==================== SIMULATION ENGINE ====================
function initSimulation() {
  const canvas = document.getElementById('simulationCanvas');
  canvas.width = canvas.offsetWidth;
  canvas.height = canvas.offsetHeight;
  drawStore();
}

function drawStore() {
  const canvas = document.getElementById('simulationCanvas');
  const ctx = canvas.getContext('2d');
  const scale = canvas.width / 920;

  // Clear
  ctx.fillStyle = '#f8f9fa';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Draw zones
  STORE_ZONES.forEach(zone => {
    ctx.fillStyle = zone.color + '20';
    ctx.strokeStyle = zone.color;
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.roundRect(zone.x * scale, zone.y * scale, zone.w * scale, zone.h * scale, 8);
    ctx.fill();
    ctx.stroke();

    // Zone label
    ctx.fillStyle = zone.color;
    ctx.font = `bold ${14 * scale}px "Noto Sans JP"`;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(zone.name, (zone.x + zone.w / 2) * scale, (zone.y + zone.h / 2) * scale);
  });

  // Draw customers
  customers.forEach(customer => {
    ctx.beginPath();
    ctx.arc(customer.x * scale, customer.y * scale, 8 * scale, 0, Math.PI * 2);
    ctx.fillStyle = customer.color;
    ctx.fill();

    // Glow effect
    ctx.beginPath();
    ctx.arc(customer.x * scale, customer.y * scale, 12 * scale, 0, Math.PI * 2);
    ctx.fillStyle = customer.color + '40';
    ctx.fill();
  });
}

function createCustomer() {
  const pathIndex = Math.floor(Math.random() * FLOW_PATHS.length);
  const path = FLOW_PATHS[pathIndex];
  const entranceZone = STORE_ZONES.find(z => z.id === 'entrance');
  const colors = ['#22c55e', '#3b82f6', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'];

  return {
    id: totalVisitors++,
    x: entranceZone.x + entranceZone.w / 2,
    y: entranceZone.y + entranceZone.h / 2,
    path: path,
    pathIndex: 0,
    targetX: entranceZone.x + entranceZone.w / 2,
    targetY: entranceZone.y + entranceZone.h / 2,
    color: colors[Math.floor(Math.random() * colors.length)],
    speed: 1.5 + Math.random() * 1.5,
    stayTime: 0,
    startTime: elapsedTime
  };
}

function updateCustomer(customer, delta) {
  const dx = customer.targetX - customer.x;
  const dy = customer.targetY - customer.y;
  const dist = Math.sqrt(dx * dx + dy * dy);

  if (dist < 10) {
    customer.stayTime += delta;

    if (customer.stayTime > 1000 + Math.random() * 1500) {
      customer.stayTime = 0;
      customer.pathIndex++;

      if (customer.pathIndex >= customer.path.length) {
        return false; // Customer exits
      }

      const nextZoneId = customer.path[customer.pathIndex];
      const nextZone = STORE_ZONES.find(z => z.id === nextZoneId);
      if (nextZone) {
        customer.targetX = nextZone.x + nextZone.w / 2 + (Math.random() - 0.5) * nextZone.w * 0.6;
        customer.targetY = nextZone.y + nextZone.h / 2 + (Math.random() - 0.5) * nextZone.h * 0.6;
      }
    }
  } else {
    const speed = customer.speed * simulationSpeed * delta / 16;
    customer.x += (dx / dist) * speed;
    customer.y += (dy / dist) * speed;
  }

  return true;
}

function simulationLoop(timestamp) {
  if (!simulationRunning) return;

  const delta = timestamp - lastTime;
  lastTime = timestamp;
  elapsedTime += delta * simulationSpeed;

  // Spawn new customers
  if (Math.random() < 0.02 * simulationSpeed && customers.length < 25) {
    customers.push(createCustomer());
  }

  // Update customers
  const exitedCount = customers.length;
  customers = customers.filter(c => updateCustomer(c, delta));
  totalPurchases += exitedCount - customers.length;

  // Redraw
  drawStore();

  // Update stats
  document.getElementById('statCurrentCustomers').textContent = customers.length;
  document.getElementById('statTotalVisitors').textContent = totalVisitors;
  document.getElementById('statPurchases').textContent = totalPurchases;

  const avgTime = totalPurchases > 0 ? Math.round(elapsedTime / totalPurchases / 1000) : 0;
  document.getElementById('statAvgTime').textContent = avgTime + 's';

  const minutes = Math.floor(elapsedTime / 60000);
  const seconds = Math.floor((elapsedTime % 60000) / 1000);
  document.getElementById('statElapsed').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

  animationId = requestAnimationFrame(simulationLoop);
}

function toggleSimulation() {
  simulationRunning = !simulationRunning;
  const btn = document.getElementById('playBtn');
  const icon = document.getElementById('playIcon');

  if (simulationRunning) {
    btn.innerHTML = '<span id="playIcon">â¸</span> ä¸€æ™‚åœæ­¢';
    lastTime = performance.now();
    animationId = requestAnimationFrame(simulationLoop);
  } else {
    btn.innerHTML = '<span id="playIcon">â–¶</span> å†ç”Ÿ';
    if (animationId) {
      cancelAnimationFrame(animationId);
    }
  }
}

function startSimulation() {
  simulationRunning = true;
  document.getElementById('playBtn').innerHTML = '<span id="playIcon">â¸</span> ä¸€æ™‚åœæ­¢';
  lastTime = performance.now();
  animationId = requestAnimationFrame(simulationLoop);
}

function resetSimulation() {
  simulationRunning = false;
  if (animationId) {
    cancelAnimationFrame(animationId);
  }

  customers = [];
  totalVisitors = 0;
  totalPurchases = 0;
  elapsedTime = 0;

  document.getElementById('playBtn').innerHTML = '<span id="playIcon">â–¶</span> å†ç”Ÿ';
  document.getElementById('statCurrentCustomers').textContent = '0';
  document.getElementById('statTotalVisitors').textContent = '0';
  document.getElementById('statPurchases').textContent = '0';
  document.getElementById('statAvgTime').textContent = '0s';
  document.getElementById('statElapsed').textContent = '0:00';

  drawStore();
}

function changeSpeed() {
  simulationSpeed = parseFloat(document.getElementById('speedSelect').value);
}

// Handle resize
window.addEventListener('resize', () => {
  const canvas = document.getElementById('simulationCanvas');
  canvas.width = canvas.offsetWidth;
  canvas.height = canvas.offsetHeight;
  drawStore();
});
</script>

</body>
</html>
